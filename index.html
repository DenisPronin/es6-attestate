<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>ES6 attestation</title>

    <link rel="stylesheet" href="node_modules/reveal.js/css/reveal.css"/>
    <link rel="stylesheet" href="node_modules/reveal.js/css/theme/black.css"/>
    <link rel="stylesheet" href="node_modules/reveal.js/lib/css/zenburn.css"/>
    <link rel="stylesheet" href="css/attestation.css"/>
</head>
<body>

    <div class="reveal">
        <div class="slides">

            <section id="slide-1" class="slide">
                <h1> Введение в ES6 </h1>
                <img src="img/es6-logo.png" alt="es6-logo"/>
            </section>

            <section id="slide-2" class="slide">
                <h1> О стандарте </h1>

                <ul>
                    <li>Название стандарта - ECMAScript</li>
                    <li>Текущая версия - ES-2015 (ES6)</li>
                    <li>ES5 - был в 2009 году.</li>
                </ul>
            </section>

            <section id="slide-3" class="slide">
                <h1> Browser Support </h1>

                <a href="https://kangax.github.io/compat-table/es6/" target="_blank">https://kangax.github.io/compat-table/es6/</a>

                <img src="img/es6-browser-support.png" alt=""/>
            </section>

            <section id="slide-4" class="slide">
                <h1> Browser Support </h1>

                <img src="img/grumpy-cat.jpg" alt=""/>
            </section>

            <section id="slide-5" class="slide">
                <h1> Babel </h1>
                <a href="https://babeljs.io/" target="_blank">https://babeljs.io/</a>
                <img src="img/keep-calm.jpg" alt=""/>

                <p>
                    Преобразует код из ES-2015 в ES5 <br/>
                    ES5 поддерживается везде
                </p>

                <p>Легко добавляется в состав системы сборки frontend'a (Gulp, Grunt, Webpack ...)</p>
            </section>

            <section id="slide-6" class="slide">
                <h1> Browser Support with Babel </h1>
                <img src="img/lucky-cat.jpeg" alt=""/>
            </section>

            <section id="slide-7" class="slide">
                <h1> Фичи ES6 </h1>
                <img src="img/back-to-future.jpeg" alt=""/>
            </section>

            <section id="slide-8" class="slide slide-attestation">
                <h1>Объявление переменной с let </h1>

                <p>
                    <strong>Область видимости переменной let — блок {}</strong>
                </p>
                <div class="col-50">
                    <h3>ES5</h3>
                    <pre><code data-trim data-noescape class="javascript">
function showApplesCount() {
    var apples = 5;
    if (true) {
        var apples = 10;
        alert(apples); // 10
    }
    alert(apples); // 10
}
                    </code></pre>
                </div>
                <div class="col-50">
                    <h3>ES-2015</h3>
                    <pre><code data-trim data-noescape class="javascript">
function showApplesCount() {
    let apples = 5; // (*)
    if (true) {
        let apples = 10;
        alert(apples); // 10
    }
    alert(apples); // 5
}
                    </code></pre>
                </div>
            </section>

            <section id="slide-9" class="slide slide-attestation">
                <h1> Объявление переменной с let </h1>
                <p>
                    <strong>let видна только после объявления</strong>
                </p>
                <div class="col-50">
                    <h3>ES5</h3>
                    <pre><code data-trim data-noescape class="javascript">
alert(a); // undefined
var a = 5;
                    </code></pre>
                </div>
                <div class="col-50">
                    <h3>ES-2015</h3>
                    <pre><code data-trim data-noescape class="javascript">
alert(a); // ReferenceError
let a = 5;
                    </code></pre>
                </div>
            </section>

            <section id="slide-10" class="slide slide-attestation">
                <h1>let в цикле</h1>
                <div class="col-50">
                    <h3>ES5</h3>
                    <pre><code data-trim data-noescape class="javascript">
for(var i=0; i<10; i++) {
    /* … */
}
alert(i); // 10
                    </code></pre>
                </div>
                <div class="col-50">
                    <h3>ES-2015</h3>
                    <pre><code data-trim data-noescape class="javascript">
for(let i=0; i<10; i++) {
    /* … */
}
alert(i); // i is not defined
                    </code></pre>
                </div>
            </section>

            <section id="slide-11" class="slide">
                <h1>const</h1>
                <p>
                    Задаёт константу, которую нельзя менять
                </p>
                <pre><code data-trim data-noescape class="javascript">
const apple = 5;
apple = 10; // ошибка
                </code></pre>
            </section>

            <section id="slide-12" class="slide">
                <h2>Деструктуризация</h2>
                <img src="img/cat1.jpg" alt=""/>
            </section>

            <section id="slide-13" class="slide">
                <h2>Деструктуризация</h2>
                <p class="align-left">
                    Особый синтаксис присваивания, при котором можно присвоить массив или объект сразу нескольким переменным, разбив его на части
                </p>
                <pre><code data-trim data-noescape class="javascript">
let [first, last] = ["Первый", "Второй"];
alert(first); // Первый
alert(last);  // Последний
                </code></pre>

            </section>

            <section id="slide-14" class="slide">
                <h2>Деструктуризация. Оператор Spread</h2>
                <pre><code data-trim data-noescape class="javascript">
let [first, last, ...rest] = "Юлий Цезарь Император Рима".split(" ")
alert(first); // Юлий
alert(last);  // Цезарь
alert(rest);  // ["Император", "Рима"]
                </code></pre>
            </section>

            <section id="slide-15" class="slide">
                <h2>Деструктуризация. Значения по умолчанию</h2>
                <pre><code data-trim data-noescape class="javascript">
let [first='First', last] = [];
alert(first); // First
alert(last);  // undefined
                </code></pre>
            </section>

            <section id="slide-16" class="slide">
                <h2>Деструктуризация. Объекты</h2>

                <p>
                    let {var1, var2} = {var1:…, var2:…}
                </p>
                <pre><code data-trim data-noescape class="javascript">
let options = {
    title: "Меню",
    width: 100,
    height: 200
};

let {title, width = 0, height:h} = options;
alert(title);  // Меню
alert(width);  // 100
alert(h); // 200
                </code></pre>
            </section>

            <section id="slide-17" class="slide">
                <h2>Строки в js</h2>

                <pre><code data-trim data-noescape class="javascript">
var value = 'value';
var str = 'some string with ' + value + ' and ' +
    'multiline'
                </code></pre>

                <img src="img/grumpy-cat2.jpg" alt=""/>
            </section>

            <section id="slide-18" class="slide">
                <h2>Шаблоны в строках</h2>

                <p>
                    <strong>Обратные кавычки ``</strong>
                </p>
                <ul>
                    <li>
                        Разрешён перевод строки
                        <pre><code data-trim data-noescape class="javascript">
alert(`моя
многострочная
строка`);
                        </code></pre>
                    </li>
                    <li>
                        Можно вставлять выражения при помощи ${…}
                        <pre class="full-width"><code data-trim data-noescape class="javascript">
let apples = 2;
let oranges = 3;

alert(`Sum of: ${apples} + ${oranges} = ${apples + oranges}`);
// Sum of  2 + 3 = 5
                        </code></pre>
                    </li>
                </ul>
            </section>

            <section id="slide-19" class="slide">
                <h2>Строки. Новые методы</h2>

                <ul>
                    <li>
                        <span class="term">str.includes(s)</span> — проверяет, включает ли одна строка в себя другую, возвращает true/false.
                    </li>
                    <li>
                        <span class="term">str.endsWith(s)</span> — возвращает true, если строка str заканчивается подстрокой s.
                    </li>
                    <li>
                        <span class="term">str.startsWith(s)</span> — возвращает true, если строка str начинается со строки s.
                    </li>
                    <li>
                        <span class="term">str.repeat(times)</span> — повторяет строку str times раз.
                    </li>
                </ul>
            </section>

            <section id="slide-20" class="slide">
                <h2>Строки в ES-2015</h2>

                <img src="img/cat2.jpg" alt=""/>
            </section>

            <section id="slide-21" class="slide">
                <h1>Функции</h1>
                <p>
                    Параметры по умолчанию
                </p>

                <pre><code data-trim data-noescape class="javascript">
function func(title = "Title", width = getWidth(), height = 200) {
    alert(`${title} ${width} ${height}`);
}

func("Меню"); // Меню 100 200
                </code></pre>
            </section>

            <section id="slide-22" class="slide">
                <h1>Функции</h1>
                <p>
                    Оператор spread вместо arguments
                </p>

                <pre><code data-trim data-noescape class="javascript">
function showName(firstName, lastName, ...rest) {
    alert(`${firstName} ${lastName} - ${rest}`);
}

showName("Юлий", "Цезарь", "Император", "Рима");
// Юлий Цезарь - Император,Рима
                </code></pre>
            </section>

            <section id="slide-23" class="slide">
                <h1>Функции</h1>
                <p>
                    Деструктуризация в параметрах
                </p>

                <pre><code data-trim data-noescape class="javascript">
let options = {
    title: "Меню",
    width: 100,
    height: 200
};

function showMenu({title, width, height}) {
    alert(`${title} ${width} ${height}`); // Меню 100 200
}
showMenu(options);
                </code></pre>
            </section>

            <section id="slide-24" class="slide">
                <h1>Функции</h1>
                <ul>
                    <li>
                        <p>Свойство name</p>
                         <pre><code data-trim data-noescape class="javascript">
function f() {}
f.name === "f" // true
                         </code></pre>
                    </li>
                    <li>
                        Функция, объявленная в блоке, видна только в этом блоке.
                    </li>
                </ul>
            </section>

            <section id="slide-25" class="slide">
                <h1>Функции</h1>
                <p>
                    Стрелочный синтаксис
                </p>

                <div>
                    <h3>ES5</h3>
                    <pre><code data-trim data-noescape class="javascript">
var positive = numbers.filter(function(num) {
    return num > 0
});
                    </code></pre>
                </div>
                <div>
                    <h3>ES-2015</h3>
                    <pre><code data-trim data-noescape class="javascript">
var positive = numbers.filter(num => num > 0);
                    </code></pre>
                </div>
            </section>

            <section id="slide-26" class="slide">
                <h1>Объекты</h1>
                <p>
                    Короткое свойство
                </p>
                <div>
                    <pre><code data-trim data-noescape class="javascript">
let name = "Вася";
let isAdmin = true;

let user = {
    name,
    isAdmin
};
alert( JSON.stringify(user) );
// {"name": "Вася", "isAdmin": true}
                    </code></pre>
                </div>
            </section>

            <section id="slide-27" class="slide">
                <h1>Объекты</h1>
                <p>
                    Вычисляемые свойства
                </p>
                <div>
                    <pre><code data-trim data-noescape class="javascript">
let propName = "firstName";

let user = {
    [propName]: "Вася"
};
                    </code></pre>
                </div>
            </section>

            <section id="slide-28" class="slide">
                <h1>Объекты</h1>
                <p>
                    Методы объекта
                </p>
                <div>
                    <pre><code data-trim data-noescape class="javascript">
let name = "Вася";
let user = {
    name,
    // вместо "sayHi: function()
    sayHi() {
        alert(this.name);
    }
};

user.sayHi(); // Вася
                    </code></pre>
                </div>
            </section>

            <section id="slide-29" class="slide">
                <h1>Объекты</h1>
                <p>
                    __proto__ и super
                </p>
                <div>
                    <pre><code data-trim data-noescape class="javascript">
let animal = {
    walk() {
        alert("I'm walking");
    }
};

let rabbit = {
    __proto__: animal,
    walk() {
        super.walk(); // I'm walking
    }
};

rabbit.walk();
                    </code></pre>
                </div>
            </section>

            <section id="slide-30" class="slide">
                <h1>Объекты. Новые методы</h1>
                <ul>
                    <li>
                        Object.assign(target, src1, src2...)
                    </li>
                    <li>
                        Object.is(value1, value2)
                    </li>
                </ul>
            </section>

            <section id="slide-31" class="slide">
                <h1>Классы</h1>
                <p>Синтаксис</p>

                <pre><code data-trim data-noescape class="javascript">
class Название [extends Родитель]  {
    constructor
    методы
}
                </code></pre>
                <img src="img/saharok.jpg" alt=""/>
            </section>

            <section id="slide-32" class="slide">
                <h2>Классы</h2>

                <pre><code data-trim data-noescape class="javascript long-code">
class User {
    constructor(name) {
        this.name = name;
    }

    sayHi() {
        alert(this.name);
    }
}

let user = new User("Вася");
user.sayHi(); // Вася
                </code></pre>
            </section>

            <section id="slide-33" class="slide">
                <h2>Классы</h2>
                <p>Геттеры и сеттеры</p>

                <pre><code data-trim data-noescape class="javascript long-code">
class User {
    constructor(firstName, lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
   }

    get fullName() {
        return `${this.firstName} ${this.lastName}`;
    }

    set fullName(newValue) {
        [this.firstName, this.lastName] = newValue.split(' ');
    }
}

let user = new User("Вася", "Пупкин");
alert( user.fullName ); // Вася Пупков
user.fullName = "Иван Петров";
alert( user.fullName ); // Иван Петров

                </code></pre>
            </section>

            <section id="slide-34" class="slide">
                <h2>Классы</h2>
                <p>Статические свойства</p>

                <pre><code data-trim data-noescape class="javascript long-code">
class User {
    constructor(firstName, lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    static createGuest() {
      return new User("Гость", "Сайта");
    }
};

let user = User.createGuest();

                </code></pre>
            </section>

            <section id="slide-35" class="slide">
                <h2>Классы</h2>
                <p>Наследование</p>

                <div class="col-50">
                    <pre><code data-trim data-noescape class="javascript">
class Animal {
  constructor(name) {
    this.name = name;
  }

  walk() {
    alert(`${this.name} walk`);
  }
}
                    </code></pre>
                </div>
                <div class="col-50">
                    <pre><code data-trim data-noescape class="javascript">
class Rabbit extends Animal {
    walk() {
        super.walk();
        alert("...and jump!");
    }
}

new Rabbit("Вася").walk();
                    </code></pre>
                </div>
            </section>

            <section id="slide-36" class="slide">
                <h2>Классы</h2>
                <p>private и protected свойства</p>

                <img src="img/grumpy-cat3.png" alt=""/>
            </section>

            <section id="slide-37" class="slide">
                <h2>Модули</h2>

                <ul>
                    <li>AMD (Require.js)</li>
                    <li>Common.js (Node.js)</li>
                </ul>
            </section>

            <section id="slide-38" class="slide">
                <h2>Модули: export</h2>

                <p class="align-left">Ключевое слово <strong>export</strong> можно ставить:</p>

                <ul>
                    <li>
                        <div>Перед объявлением переменных, функций и классов</div>
                        <pre><code data-trim data-noescape class="javascript">
export let one = 1;
                        </code></pre>
                    </li>
                    <li>
                        <div>Отдельно, при этом в фигурных скобках указывается, что именно экспортируется</div>
                        <pre><code data-trim data-noescape class="javascript">
let one = 1;
let two = 2;
export {one as once, two as twice};
                        </code></pre>
                    </li>
                </ul>
            </section>

            <section id="slide-39" class="slide">
                <h2>Модули: import</h2>

                <pre><code data-trim data-noescape class="javascript">
import {one, two} from "./nums";
                </code></pre>
            </section>

            <section id="slide-40" class="slide">
                <h1>ES6. Коллекции</h1>

                <ul>
                    <li>Map</li>
                    <li>Set</li>
                    <li>WeakSet</li>
                    <li>WeakMap</li>
                </ul>
            </section>

            <section id="slide-41" class="slide">
                <h1>Map</h1>

                <p class="align-left">Object. Ключ - только строка</p>
                <p class="align-left">Map. Ключ - произвольный тип</p>
                <pre><code data-trim data-noescape class="javascript">
let map = new Map([
    ['string',  'str1'],
    [1,    'num1']
]);
map.set(true, 'bool1');
map.size() // 3
                </code></pre>
            </section>

            <section id="slide-42" class="slide">
                <h1>Map. Методы</h1>

                <ul class="left-ul">
                    <li>
                        map.delete(key)
                    </li>
                    <li>
                        map.clear()
                    </li>
                    <li>
                        map.has(key)
                    </li>
                </ul>

                <p>Для итерации используются:</p>
                <ul class="left-ul">
                    <li>
                        map.keys() - по ключам
                    </li>
                    <li>
                        map.values() - по значениям
                    </li>
                    <li>
                        map.entries() - возвращает массив [ключ, значение]
                    </li>
                </ul>
            </section>

            <section id="slide-43" class="slide">
                <h1>Map</h1>

                <pre><code data-trim data-noescape class="javascript">
let recipeMap = new Map([
    ['огурцы', '500 гр'],
    ['помидоры', '300гр'],
]);

for(let key of recipeMap.keys()) {
    alert(key); // огурцы, помидоры
}

for(let amount of recipeMap.values()) {
    alert(amount); // 500 гр, 350 гр
}

for(let entry of recipeMap)
    alert(entry); // ['огурцы', '500 гр'] ...
}
                </code></pre>
            </section>

            <section id="slide-44" class="slide">
                <h1>Set</h1>

                <p>Коллекция множества уникальных значений</p>
                <pre><code data-trim data-noescape class="javascript">
let set = new Set();

let vasya = {name: "Вася"};
let petya = {name: "Петя"};
let dasha = {name: "Даша"};

set.add(vasya);
set.add(petya);
set.add(dasha);
set.add(vasya);
set.add(petya);

alert( set.size ); // 3
set.forEach( user => alert(user.name ) ); // Вася, Петя, Даша
                </code></pre>
            </section>

            <section id="slide-45" class="slide">
                <h1>Set. Методы</h1>

                <ul>
                    <li>
                        set.add(item)
                    </li>
                    <li>
                        set.delete(item)
                    </li>
                    <li>
                        set.has(item)
                    </li>
                    <li>
                        set.clear()
                    </li>
                </ul>
            </section>

            <section id="slide-46" class="slide">
                <h1>WeakSet и WeakMap</h1>

                <div class="align-left">
                    <div>Особый вид коллекций не препятствующий сборщику мусора удалять свои элементы.</div>
                    <div>Работают только на запись и чтение по ключу</div>
                </div>

                <p>Ограничения:</p>
                <ul>
                    <li>
                        Нет свойства size
                    </li>
                    <li>
                        Нельзя итерировать
                    </li>
                    <li>
                        Нет метода clear
                    </li>
                </ul>
            </section>

            <section id="slide-47" class="slide">
                <h1>WeakMap. Пример</h1>

                <pre><code data-trim data-noescape class="javascript">
let activeUsers = [
    {name: "Vasia"},
    {name: "Petia"},
    {name: "Masha"}
];

let weakMap = new WeakMap();

weakMap.set(activeUsers[0], 1);
weakMap.set(activeUsers[1], 2);
weakMap.set(activeUsers[2], 3);

alert( weakMap.get(activeUsers[0]) ); // 1

activeUsers.splice(0, 1); // в weakMap теперь только 2 элемента
activeUsers.splice(0, 1); // в weakMap теперь только 1 элемент
                </code></pre>
            </section>

        </div>
    </div>

    <script src="node_modules/reveal.js/js/reveal.js"></script>
    <script src="node_modules/reveal.js/plugin/highlight/highlight.js"></script>
    <script src="dist/bundle.js"></script>
    <!--<script src="js/app.js"></script>-->

    <script>
        Reveal.initialize({
            height: 900,
            controls: true,
            progress: true,
            history: true,
            mouseWheel: false
        });

        hljs.initHighlightingOnLoad();

    </script>
</body>
</html>